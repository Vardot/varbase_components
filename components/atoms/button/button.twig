{#
/**
 * @file
 * Template for a button component.
 *
 * Available config:
 * - html_tag: The HTML tag to use for the button (button | a). Defaults to `button`.
 * - link: Optional and only when having HTML tag as anchor.
 * - color: Bootstrap includes several predefined button styles, each serving its own
 *          semantic purpose, with a few extras thrown in for more control.
 *          (primary | secondary | success | danger | warning | info | dark | light | link)
 * - outline: (true|false) In need of a button, but not the hefty background colors they bring?
              Replace the default modifier classes with the `.btn-outline-*` ones to remove all
              background images and colors on any button.
 * - size: (btn-sm | btn-lg) Bootstrap button size
 * - disabled: (true|false) Disabled button
 * - attributes: Attributes array.
 * - utility_classes: An array of utility classes.
 * - content: The content for the button
 */
#}

{% set html_tag = html_tag ?? 'button' %}
{% set size = size ? [size] : [] %}
{% set disabled_classes = disabled ? ['disabled'] : [] %}
{% set utility_classes = utility_classes ? utility_classes : [] %}

{% set button_color = [] %}

{% if color != '' %}
  {% if outline == true %}
    {% set button_color = ['btn-outline-' ~ color] %}
  {% else %}
    {% set button_color = ['btn-' ~ color] %}
  {% endif %}
{% endif %}

{%
  set classes = [
    'btn',
  ]|merge(button_color)|merge(size)|merge(disabled_classes)|merge(utility_classes)
%}

{% if not attributes %}
  {% set attributes = create_attribute() %}
{% endif %}

{% if html_tag == 'a' and link != '' %}
  {% set attributes = attributes.setAttribute('href', link ) %}
  {% set attributes = attributes.setAttribute('role', 'button' ) %}

  {#
   # Bootstrap ~5.3.0 Link functionality caveat:
   # https://getbootstrap.com/docs/5.3/components/buttons/#link-functionality-caveat
   #
   #}
  {% if disabled == true %}
    {% set attributes = attributes.setAttribute('aria-disabled', 'true' ) %}
    {% set attributes = attributes.setAttribute('tabindex', '-1' ) %}
  {% endif %}
{% endif %}

<{{ html_tag }}{{ attributes.addClass(classes) }}>{% block content %}{{ content }}{% endblock %}</{{ html_tag }}>
